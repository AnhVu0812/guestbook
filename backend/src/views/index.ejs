<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>S·ªï L∆∞u B√∫t</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>üìñ S·ªï L∆∞u B√∫t</h1>

  <!-- Form g·ª≠i l·ªùi nh·∫Øn -->
  <form id="messageForm" method="POST" action="/submit">
    <input type="text" name="name" placeholder="T√™n c·ªßa b·∫°n" required>
    <textarea name="message" placeholder="L·ªùi nh·∫Øn" required></textarea>
    <button type="submit">G·ª≠i</button>
  </form>

  <hr>

  <h2>L·ªùi nh·∫Øn g·∫ßn ƒë√¢y:</h2>
  
<% messages.forEach(msg => { %>
  <div class="message-item" data-id="<%= msg._id %>">
    <p>
      <strong><%= msg.name %></strong>: 
      <span class="message-text"><%= msg.message %></span>
    </p>
    
    <small><%= new Date(msg.createdAt).toLocaleString() %></small>

    <!-- C√°c n√∫t s·ª≠a/x√≥a -->
    <div class="message-actions">
      <button class="edit-btn">S·ª≠a</button>

      <form method="POST" action="/messages/<%= msg._id %>?_method=DELETE" class="inline-form">
        <button class="delete-btn" type="submit" onclick="return confirm('X√°c nh·∫≠n x√≥a?')">X√≥a</button>
      </form>
    </div>

    <!-- Form s·ª≠a tin nh·∫Øn -->
    <form class="edit-form" method="POST" action="/messages/<%= msg._id %>?_method=PUT" style="display: none;">
      <input type="text" name="name" value="<%= msg.name %>" required>
      <input type="text" name="message" value="<%= msg.message %>" required>
      <button type="submit">L∆∞u</button>
      <button type="button" class="cancel-btn">H·ªßy</button>
    </form>

    <hr>
  </div>
<% }) %>

  <script src = "/main.js"></script>
</body>
</html>
